(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{566:function(t,e,_){"use strict";_.r(e);var r=_(13),v=Object(r.a)({},(function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("p",[t._v("Empire的进攻性研究")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xz.aliyun.com/u/25067",target:"_blank",rel:"noopener noreferrer"}},[_("strong",[t._v("清风明月")]),_("OutboundLink")],1),t._v(" / 2020-01-10 09:36:00 / 浏览数 13358 "),_("a",{attrs:{href:"https://xz.aliyun.com/tab/1",target:"_blank",rel:"noopener noreferrer"}},[t._v("安全技术"),_("OutboundLink")],1),t._v(" "),_("a",{attrs:{href:"https://xz.aliyun.com/node/2",target:"_blank",rel:"noopener noreferrer"}},[t._v("安全工具"),_("OutboundLink")],1),_("strong",[t._v("[顶(0)](javascript:) [踩(0)](javascript:)")])]),t._v(" "),_("hr"),t._v(" "),_("h2",{attrs:{id:"_0x01-empire简介及部署"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x01-empire简介及部署"}},[t._v("#")]),t._v(" 0x01 Empire简介及部署")]),t._v(" "),_("p",[t._v("Empire是一个开源，跨平台的远程管理和后渗透开发框架。本文是个大杂烩，介绍了Empire的基本功能，还总结Empire常见模块用途，以及渗透中的一些案例研究。")]),t._v(" "),_("p",[t._v("项目地址：https://github.com/EmpireProject/Empire")]),t._v(" "),_("h3",{attrs:{id:"empire的部署"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#empire的部署"}},[t._v("#")]),t._v(" Empire的部署")]),t._v(" "),_("p",[t._v("官方支持部署系统Kali、Debian、Ubuntu。")]),t._v(" "),_("p",[t._v("本文环境在系统Kali 2019.4下部署完成。")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("git clone https://github.com/EmpireProject/Empire\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144507-13f2761c-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144507-13f2761c-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("部署坑点：")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144515-18cae98a-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144515-18cae98a-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("install.sh脚本安装的requests模块版本和urllib3模块不兼容，卸载requests重新安装解决问题。")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("pip uninstall requests\npip install requests\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br")])]),_("h2",{attrs:{id:"_0x02-empire基础知识"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x02-empire基础知识"}},[t._v("#")]),t._v(" 0x02 Empire基础知识")]),t._v(" "),_("p",[t._v("在使用工具前，对工具有一个基础概念会让使用更轻松一点，分析工具目录用途是最快了解工具架构的方法。")]),t._v(" "),_("h3",{attrs:{id:"empire目录结构"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#empire目录结构"}},[t._v("#")]),t._v(" Empire目录结构")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("├── data\n│   ├── agent\n│   ├── misc\n│   ├── module_source\n│   ├── obfuscated_module_source\n│   └── profiles\n├── downloads\n│   ├── 37SNWM1U\n│   ├── 4RY12ZPW\n│   ├── DF4UK2SX\n│   ├── FP46V2R1\n│   ├── KU5E687M\n│   ├── STH5VG46\n│   └── Z1UCRB3X\n├── lib\n│   ├── common\n│   ├── listeners\n│   ├── modules\n│   ├── powershell\n│   └── stagers\n├── plugins\n└── setup\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br"),_("span",{staticClass:"line-number"},[t._v("9")]),_("br"),_("span",{staticClass:"line-number"},[t._v("10")]),_("br"),_("span",{staticClass:"line-number"},[t._v("11")]),_("br"),_("span",{staticClass:"line-number"},[t._v("12")]),_("br"),_("span",{staticClass:"line-number"},[t._v("13")]),_("br"),_("span",{staticClass:"line-number"},[t._v("14")]),_("br"),_("span",{staticClass:"line-number"},[t._v("15")]),_("br"),_("span",{staticClass:"line-number"},[t._v("16")]),_("br"),_("span",{staticClass:"line-number"},[t._v("17")]),_("br"),_("span",{staticClass:"line-number"},[t._v("18")]),_("br"),_("span",{staticClass:"line-number"},[t._v("19")]),_("br"),_("span",{staticClass:"line-number"},[t._v("20")]),_("br"),_("span",{staticClass:"line-number"},[t._v("21")]),_("br"),_("span",{staticClass:"line-number"},[t._v("22")]),_("br")])]),_("ul",[_("li",[_("p",[t._v("setup目录")]),t._v(" "),_("p",[t._v("setup最重要的两个文件是install.sh 、reset.sh，一个是安装脚本，一个是重置脚本。")]),t._v(" "),_("p",[t._v("reset.sh主要干以下事情：")]),t._v(" "),_("ol",[_("li",[t._v("重置数据库")]),t._v(" "),_("li",[t._v("删除调试文件")]),t._v(" "),_("li",[t._v("删除downloads文件夹")]),t._v(" "),_("li",[t._v("如果不在docker中，则启动Empire")])])]),t._v(" "),_("li",[_("p",[t._v("主路径empire文件程序启动入口。")])]),t._v(" "),_("li",[_("p",[t._v("data目录主要存放模块源码、程序数据、agent。")])]),t._v(" "),_("li",[_("p",[t._v("lib目录主要存放listeners、modules、powershell、stagers等功能模块。")])]),t._v(" "),_("li",[_("p",[t._v("plugins目录主要存放扩展插件。")])])]),t._v(" "),_("h3",{attrs:{id:"listeners"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#listeners"}},[t._v("#")]),t._v(" listeners")]),t._v(" "),_("p",[t._v("Empire listeners功能主要用于监听返回的shell。")]),t._v(" "),_("p",[t._v("相关命令：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("命令")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("listeners")]),t._v(" "),_("td",[t._v("进入listeners交互菜单")])]),t._v(" "),_("tr",[_("td",[t._v("uselistener")]),t._v(" "),_("td",[t._v("使用一个Empire listener模块")])]),t._v(" "),_("tr",[_("td",[t._v("info")]),t._v(" "),_("td",[t._v("显示listener模块设置信息")])]),t._v(" "),_("tr",[_("td",[t._v("set")]),t._v(" "),_("td",[t._v("设置listener模块信息")])]),t._v(" "),_("tr",[_("td",[t._v("execute")]),t._v(" "),_("td",[t._v("执行")])])])]),t._v(" "),_("p",[t._v("进入listeners交互菜单")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144529-20e44f8a-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144529-20e44f8a-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("使用一个Empire listener模块")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144545-2a856196-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144545-2a856196-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("显示listener模块设置信息")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144601-33a3d4ba-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144601-33a3d4ba-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"stagers"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#stagers"}},[t._v("#")]),t._v(" Stagers")]),t._v(" "),_("p",[t._v("Empire Stagers功能主要用于生成反弹shell的payload。")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144614-3b79e99a-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144614-3b79e99a-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("相关命令：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("命令")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("usestager")]),t._v(" "),_("td",[t._v("使用Empire stager")])]),t._v(" "),_("tr",[_("td",[t._v("info")]),t._v(" "),_("td",[t._v("显示usestager模块设置信息")])]),t._v(" "),_("tr",[_("td",[t._v("set")]),t._v(" "),_("td",[t._v("设置usestager模块信息")])]),t._v(" "),_("tr",[_("td",[t._v("execute")]),t._v(" "),_("td",[t._v("执行")])])])]),t._v(" "),_("p",[t._v("使用Empire stager")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144630-451fd144-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets/20200106144630-451fd144-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("显示usestager模块设置信息")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144646-4e82f09a-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144646-4e82f09a-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("设置usestager模块信息并执行")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144700-5727d170-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144700-5727d170-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("Payload生成成功")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144723-6495bb42-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144723-6495bb42-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"agents"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#agents"}},[t._v("#")]),t._v(" Agents")]),t._v(" "),_("p",[t._v("Empire Agents功能主要用于管理反弹shell的会话。")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("Agent命令")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("agents")]),t._v(" "),_("td",[t._v("进入agents菜单")])]),t._v(" "),_("tr",[_("td",[t._v("back")]),t._v(" "),_("td",[t._v("返回上一个菜单")])]),t._v(" "),_("tr",[_("td",[t._v("bypassuac")]),t._v(" "),_("td",[t._v("运行BypassUAC，生成一个新的Agent")])]),t._v(" "),_("tr",[_("td",[t._v("clear")]),t._v(" "),_("td",[t._v("清理agent任务")])]),t._v(" "),_("tr",[_("td",[t._v("creds")]),t._v(" "),_("td",[t._v("显示数据库中的凭据")])]),t._v(" "),_("tr",[_("td",[t._v("download")]),t._v(" "),_("td",[t._v("下载文件")])]),t._v(" "),_("tr",[_("td",[t._v("exit")]),t._v(" "),_("td",[t._v("退出")])]),t._v(" "),_("tr",[_("td",[t._v("help")]),t._v(" "),_("td",[t._v("帮助")])]),t._v(" "),_("tr",[_("td",[t._v("info")]),t._v(" "),_("td",[t._v("显示Agent信息")])]),t._v(" "),_("tr",[_("td",[t._v("injectshellcode")]),t._v(" "),_("td",[t._v("shellcode注入，例如：injectshellcode <meter_listener> "),_("pid"),t._v("</meter_listener>")],1)]),t._v(" "),_("tr",[_("td",[t._v("jobs")]),t._v(" "),_("td",[t._v("返回工作列表或者停止正在运行的工作")])]),t._v(" "),_("tr",[_("td",[t._v("kill")]),t._v(" "),_("td",[t._v("停止特定的进程名称或ID")])]),t._v(" "),_("tr",[_("td",[t._v("killdate")]),t._v(" "),_("td",[t._v("获取或设置agent的停止日期")])]),t._v(" "),_("tr",[_("td",[t._v("list")]),t._v(" "),_("td",[t._v("显示存活的agents或listeners")])]),t._v(" "),_("tr",[_("td",[t._v("listeners")]),t._v(" "),_("td",[t._v("进入存活listeners交互菜单")])]),t._v(" "),_("tr",[_("td",[t._v("lostlimit")]),t._v(" "),_("td",[t._v("检查更改丢失的agent")])]),t._v(" "),_("tr",[_("td",[t._v("main")]),t._v(" "),_("td",[t._v("返回主菜单")])]),t._v(" "),_("tr",[_("td",[t._v("mimikatz")]),t._v(" "),_("td",[t._v("运行Invoke-Mimikatz")])]),t._v(" "),_("tr",[_("td",[t._v("psinject")]),t._v(" "),_("td",[t._v("将启动器注入远程进程，例如：psinject "),_("listener",[t._v(" <pid/process_name>")])],1)]),t._v(" "),_("tr",[_("td",[t._v("pth")]),t._v(" "),_("td",[t._v("通过Mimikatz执行Pass The Hash")])]),t._v(" "),_("tr",[_("td",[t._v("rename")]),t._v(" "),_("td",[t._v("重命名agent")])]),t._v(" "),_("tr",[_("td",[t._v("resource")]),t._v(" "),_("td",[t._v("从文件中读取并执行Empire命令列表。")])]),t._v(" "),_("tr",[_("td",[t._v("revtoself")]),t._v(" "),_("td",[t._v("使用凭证/令牌还原令牌特权")])]),t._v(" "),_("tr",[_("td",[t._v("sc")]),t._v(" "),_("td",[t._v("截屏，默认为PNG。 给出压缩率意味着使用JPEG。 例如 sc [1-100]")])]),t._v(" "),_("tr",[_("td",[t._v("scriptcmd")]),t._v(" "),_("td",[t._v("在当前导入的PowerShell脚本中执行一个功能。")])]),t._v(" "),_("tr",[_("td",[t._v("scriptimport")]),t._v(" "),_("td",[t._v("导入PowerShell脚本并将其保存在代理的内存中。")])]),t._v(" "),_("tr",[_("td",[t._v("searchmodule")]),t._v(" "),_("td",[t._v("搜索Empire模块")])]),t._v(" "),_("tr",[_("td",[t._v("shell")]),t._v(" "),_("td",[t._v("执行shell命令")])]),t._v(" "),_("tr",[_("td",[t._v("shinject")]),t._v(" "),_("td",[t._v("将非meterpreter侦听器shellcode注入远程进程。例如：shinject "),_("listener",[_("pid")],1)],1)]),t._v(" "),_("tr",[_("td",[t._v("sleep")]),t._v(" "),_("td",[t._v("agent睡眠间隔")])]),t._v(" "),_("tr",[_("td",[t._v("spawn")]),t._v(" "),_("td",[t._v("为给定的侦听器名称生成一个新的Empire agent")])]),t._v(" "),_("tr",[_("td",[t._v("steal_token")]),t._v(" "),_("td",[t._v("使用凭证/令牌模拟给定进程ID的令牌。")])]),t._v(" "),_("tr",[_("td",[t._v("sysinfo")]),t._v(" "),_("td",[t._v("获取系统信息")])]),t._v(" "),_("tr",[_("td",[t._v("updatecomms")]),t._v(" "),_("td",[t._v("动态地将代理通信更新到另一个侦听器")])]),t._v(" "),_("tr",[_("td",[t._v("updateprofile")]),t._v(" "),_("td",[t._v("更新代理连接配置文件")])]),t._v(" "),_("tr",[_("td",[t._v("upload")]),t._v(" "),_("td",[t._v("上传文件")])]),t._v(" "),_("tr",[_("td",[t._v("usemodule")]),t._v(" "),_("td",[t._v("使用Empire模块")])]),t._v(" "),_("tr",[_("td",[t._v("workinghours")]),t._v(" "),_("td",[t._v("获取或设置agent的工作时间(9:00-17:00)")])])])]),t._v(" "),_("p",[t._v("使用interact命令进入Agents交互菜单")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144734-6b9b5bcc-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144734-6b9b5bcc-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h2",{attrs:{id:"_0x03-权限提升"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x03-权限提升"}},[t._v("#")]),t._v(" 0x03 权限提升")]),t._v(" "),_("p",[t._v("在Agents交互菜单，Username一栏没有*就需要权限提升。")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144747-72fdebaa-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144747-72fdebaa-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"uac-bypasses"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#uac-bypasses"}},[t._v("#")]),t._v(" UAC Bypasses")]),t._v(" "),_("p",[t._v("用户admin在管理员组，但是我们的Agents没有提升到管理员权限，这是因为UAC在发挥重要，没有以管理员身份进行运行。")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("shell net localgroup Administrators 查看在管理员组的用户\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144757-791fa01e-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144757-791fa01e-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("利用UAC Bypasses提升权限")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144809-800f36b4-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144809-800f36b4-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h2",{attrs:{id:"_0x04-横向移动"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x04-横向移动"}},[t._v("#")]),t._v(" 0x04 横向移动")]),t._v(" "),_("p",[t._v("Empire已经实现以下几种常见的横向移动模块。")]),t._v(" "),_("ul",[_("li",[t._v("Pass-the-hash")]),t._v(" "),_("li",[t._v("Invoke-WMI")]),t._v(" "),_("li",[t._v("Invoke-PsExec")]),t._v(" "),_("li",[t._v("PSRemoting")])]),t._v(" "),_("h3",{attrs:{id:"pass-the-hash"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#pass-the-hash"}},[t._v("#")]),t._v(" Pass-the-hash")]),t._v(" "),_("p",[t._v("Empire的credentials/mimikatz/pth模块通过Invoke-Mimikaz的sekurlsa::pth函数实现了哈希传递。")]),t._v(" "),_("p",[t._v("首先我们使用mimikaz提取用户凭据，creds查看用户凭据")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144819-866253ac-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144819-866253ac-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("利用situational_awareness/network/powerview/get_user收集用户，看他能干什么。")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144830-8caf1b46-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144830-8caf1b46-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("可以发现这个用户是域管理员，我们可以利用凭据来访问域中的其他机器。")]),t._v(" "),_("p",[t._v("pth 2获取凭据库中CredID为2用户运行程序的PID")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144842-93c27fb8-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144842-93c27fb8-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("然后利用steal_token窃取身份令牌")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144852-99d5cb80-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144852-99d5cb80-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("访问成功")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144902-a0187bb4-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144902-a0187bb4-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"invoke-wmi"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#invoke-wmi"}},[t._v("#")]),t._v(" Invoke-WMI")]),t._v(" "),_("p",[t._v("WMI可以描述为一组管理Windows系统的方法和功能。我们可以把它当作API来与Windows系统进行相互交流。WMI在渗透测试中的价值在于它不需要下载和安装， 因为WMI是Windows系统自带功能。而且整个运行过程都在计算机内存中发生，不会留下任何痕迹。")]),t._v(" "),_("p",[t._v("首先获取计算机名：")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144913-a6a5bd84-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144913-a6a5bd84-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("加载lateral_movement/invoke_wmi模块")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144924-ad07688a-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144924-ad07688a-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("需要设置ComputerName和Listener")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("(Empire: powershell/lateral_movement/invoke_wmi) > set Listener testhttp\n(Empire: powershell/lateral_movement/invoke_wmi) > set ComputerName DC3\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br")])]),_("p",[t._v("返回agent VBFT4SPG")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144935-b365528c-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144935-b365528c-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"invoke-psexec"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#invoke-psexec"}},[t._v("#")]),t._v(" Invoke-PsExec")]),t._v(" "),_("p",[t._v("利用PsExec进行横向移动，一般情况下不建议使用。")]),t._v(" "),_("p",[t._v("使用模块powershell/situational_awareness/network/powerview/find_localadmin_access查找可以利用PsExec进行横向移动的机器。")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144945-b9b26e22-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144945-b9b26e22-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("加载lateral_movement/invoke_psexec模块，需要设置ComputerName和Listener")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("(Empire: LDYN7VBW) > usemodule lateral_movement/invoke_psexec\n(Empire: powershell/lateral_movement/invoke_psexec) > set ComputerName DC3\n(Empire: powershell/lateral_movement/invoke_psexec) > set Listener testhttp\n(Empire: powershell/lateral_movement/invoke_psexec) > execute\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br")])]),_("p",[t._v("返回agent PLTAH594")]),t._v(" "),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106144955-bf5898e2-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106144955-bf5898e2-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("h3",{attrs:{id:"psremoting"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#psremoting"}},[t._v("#")]),t._v(" PSRemoting")]),t._v(" "),_("p",[t._v("如果远程计算机运行Enable-PSRemoting将计算机配置为接收远程命令，我们就可以利用PSRemoting来进行横向移动。")]),t._v(" "),_("p",[t._v("配置PowerShell会话的远程访问")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("Enable-PSRemoting -Force #启用\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[_("a",{attrs:{href:"https://xzfile.aliyuncs.com/media/upload/picture/20200106145007-c6ca4e5e-3050-1.png",target:"_blank",rel:"noopener noreferrer"}},[_("img",{attrs:{src:"/images/blogs/CyberSecurity/SecurityTools/Empire%E7%AE%80%E4%BB%8B%E5%8F%8A%E9%83%A8%E7%BD%B2.assets//20200106145007-c6ca4e5e-3050-1.png",alt:"img"}}),_("OutboundLink")],1)]),t._v(" "),_("p",[t._v("更多关于PSRemoting的知识请看下方链接：")]),t._v(" "),_("p",[t._v("https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/enable-psremoting?view=powershell-6")]),t._v(" "),_("h2",{attrs:{id:"_0x05-empire-204个模块信息列表"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_0x05-empire-204个模块信息列表"}},[t._v("#")]),t._v(" 0x05 Empire 204个模块信息列表")]),t._v(" "),_("h3",{attrs:{id:"code-execution-代码执行"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#code-execution-代码执行"}},[t._v("#")]),t._v(" code_execution（代码执行）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("code_execution/invoke_dllinjection")]),t._v(" "),_("td",[t._v("使用PowerSploit的Invoke-DLLInjection将Dll注入您选择的进程ID。")])]),t._v(" "),_("tr",[_("td",[t._v("code_execution/invoke_metasploitpayload")]),t._v(" "),_("td",[t._v("生成一个新的隐藏PowerShell窗口，该窗口下载并执行Metasploit Payload。这与Metasploit模块theexploit/multi/scripts/web_delivery互动")])]),t._v(" "),_("tr",[_("td",[t._v("code_execution/invoke_ntsd")]),t._v(" "),_("td",[t._v("使用NT Symbolic Debugger执行Empire launcher代码")])]),t._v(" "),_("tr",[_("td",[t._v("code_execution/invoke_reflectivepeinjection")]),t._v(" "),_("td",[t._v("使用PowerSploit的Invoke-ReflectivePEInjection进行反射PE注入，将DLL/EXE加载进PowerShell进程中，或者将DLL加载进远程进程中")])]),t._v(" "),_("tr",[_("td",[t._v("code_execution/invoke_shellcode")]),t._v(" "),_("td",[t._v("使用PowerSploit的Invoke--Shellcode注入Shellcode")])]),t._v(" "),_("tr",[_("td",[t._v("code_execution/invoke_shellcodemsil")]),t._v(" "),_("td",[t._v("执行shellcode")])])])]),t._v(" "),_("h3",{attrs:{id:"collection-信息采集"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#collection-信息采集"}},[t._v("#")]),t._v(" collection（信息采集）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("collection/ChromeDump")]),t._v(" "),_("td",[t._v("收集chrome浏览器保存的密码和浏览历史记录")])]),t._v(" "),_("tr",[_("td",[t._v("collection/FoxDump")]),t._v(" "),_("td",[t._v("收集Firefox浏览器保存的密码和浏览历史记录")])]),t._v(" "),_("tr",[_("td",[t._v("collection/USBKeylogger*")]),t._v(" "),_("td",[t._v("利用ETW作为键盘记录")])]),t._v(" "),_("tr",[_("td",[t._v("collection/WebcamRecorder")]),t._v(" "),_("td",[t._v("从摄像头捕获视频")])]),t._v(" "),_("tr",[_("td",[t._v("collection/browser_data")]),t._v(" "),_("td",[t._v("搜索浏览器历史记录或书签")])]),t._v(" "),_("tr",[_("td",[t._v("collection/clipboard_monitor")]),t._v(" "),_("td",[t._v("按指定的时间间隔监视剪贴板")])]),t._v(" "),_("tr",[_("td",[t._v("collection/file_finder")]),t._v(" "),_("td",[t._v("查找域中的敏感文件")])]),t._v(" "),_("tr",[_("td",[t._v("collection/find_interesting_file")]),t._v(" "),_("td",[t._v("查找域中的敏感文件")])]),t._v(" "),_("tr",[_("td",[t._v("collection/get_indexed_item")]),t._v(" "),_("td",[t._v("获取Windows desktop search索引文件")])]),t._v(" "),_("tr",[_("td",[t._v("collection/get_sql_column_sample_data")]),t._v(" "),_("td",[t._v("从目标SQL Server返回列信息。")])]),t._v(" "),_("tr",[_("td",[t._v("collection/get_sql_query")]),t._v(" "),_("td",[t._v("在目标SQL服务器上执行查询")])]),t._v(" "),_("tr",[_("td",[t._v("collection/inveigh")]),t._v(" "),_("td",[t._v("Windows PowerShell LLMNR/mDNS/NBNS中间人工具")])]),t._v(" "),_("tr",[_("td",[t._v("collection/keylogger")]),t._v(" "),_("td",[t._v("键盘记录到keystrokes.txt文件中，文件位置/downloads/"),_("agentname",[t._v("/keystrokes.txt")])],1)]),t._v(" "),_("tr",[_("td",[t._v("collection/minidump")]),t._v(" "),_("td",[t._v("进程的全内存转储，PowerSploit的Out-Minidump.ps1")])]),t._v(" "),_("tr",[_("td",[t._v("collection/netripper")]),t._v(" "),_("td",[t._v("将NetRipper注入目标进程，该进程使用API挂钩以拦截来自低特权用户的网络流量和与加密相关的功能，从而能够在加密之前/解密之后捕获纯文本流量和加密流量。")])]),t._v(" "),_("tr",[_("td",[t._v("collection/ninjacopy*")]),t._v(" "),_("td",[t._v("通过读取原始卷并解析NTFS结构，从NTFS分区卷中复制文件。")])]),t._v(" "),_("tr",[_("td",[t._v("collection/packet_capture*")]),t._v(" "),_("td",[t._v("使用netsh在主机上启动数据包捕获。")])]),t._v(" "),_("tr",[_("td",[t._v("collection/prompt")]),t._v(" "),_("td",[t._v("提示当前用户在表单框中输入其凭据，然后返回结果。")])]),t._v(" "),_("tr",[_("td",[t._v("collection/screenshot")]),t._v(" "),_("td",[t._v("屏幕截图")])]),t._v(" "),_("tr",[_("td",[t._v("collection/vaults/add_keepass_config_trigger")]),t._v(" "),_("td",[t._v("寻找KeePass配置")])]),t._v(" "),_("tr",[_("td",[t._v("collection/vaults/find_keepass_config")]),t._v(" "),_("td",[t._v("此模块查找并解析KeePass.config.xml (2.X)和KeePass.config.xml (1.X)文件。")])]),t._v(" "),_("tr",[_("td",[t._v("collection/vaults/get_keepass_config_trigger")]),t._v(" "),_("td",[t._v("该模块从KeePass 2.X配置XML文件中提取触发器说明")])]),t._v(" "),_("tr",[_("td",[t._v("collection/vaults/keethief")]),t._v(" "),_("td",[t._v("此模块检索未锁定的KeePass数据库的database mastey key信息")])]),t._v(" "),_("tr",[_("td",[t._v("collection/vaults/remove_keepass_config_trigger")]),t._v(" "),_("td",[t._v("该模块从Find-KeePassConfig找到的所有KeePass配置中删除所有触发器")])])])]),t._v(" "),_("h3",{attrs:{id:"credentials-身份凭证"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#credentials-身份凭证"}},[t._v("#")]),t._v(" credentials（身份凭证）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("credentials/credential_injection*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-CredentialInjection创建具有明文凭证的登录，而不会触发事件ID 4648使用显式凭据尝试登录")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/enum_cred_store")]),t._v(" "),_("td",[t._v("从Windows凭据管理器中转储当前交互用户的纯文本凭据")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/invoke_kerberoast")]),t._v(" "),_("td",[t._v("为具有非空服务主体名称（SPN）的所有用户请求kerberos票据，并将其提取为John或Hashcat可用格式")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/powerdump*")]),t._v(" "),_("td",[t._v("使用Posh-SecMod的Invoke-PowerDump从本地系统中转储哈希")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/sessiongopher")]),t._v(" "),_("td",[t._v("提取WinSCP已保存的会话和密码")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/tokens")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-TokenManipulation枚举可用的登录令牌，并使用它们创建新的进程")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/vault_credential*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Get-VaultCredential以显示Windows Vault凭证对象，包括明文Web凭证")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/cache*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以提取MSCache(v2) hashes")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/certs*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数将所有证书提取到本地目录")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/command*")]),t._v(" "),_("td",[t._v("使用自定义命令运行PowerSploit的Invoke-Mimikatz函数")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/dcsync")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数，以通过Mimikatz的lsadump::dcsync模块提取给定的帐户密码")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/dcsync_hashdump")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数，以使用Mimikatz的lsadump::dcsync模块收集所有域哈希")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/extract_tickets")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数，以base64编码形式从内存中提取kerberos票据")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/golden_ticket")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以生成黄金票据并将其注入内存")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/keys*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以将所有密钥提取到本地目录")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/logonpasswords*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以从内存中提取纯文本凭据。")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/lsadump*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以从内存中提取特定的用户哈希。 在域控制器上很有用。")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/mimitokens*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以列出或枚举令牌。")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/pth*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以执行sekurlsa::pth来创建一个新进程。")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/purge")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数从内存中清除所有当前的kerberos票据")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/sam*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数从安全帐户管理器（SAM）数据库中提取哈希")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/silver_ticket")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数，以生成服务器/服务的白银票据并将其注入内存。")])]),t._v(" "),_("tr",[_("td",[t._v("credentials/mimikatz/trust_keys*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数，从域控制器中提取域信任密钥。")])])])]),t._v(" "),_("h3",{attrs:{id:"exfiltration-数据窃取"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#exfiltration-数据窃取"}},[t._v("#")]),t._v(" exfiltration（数据窃取）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("exfiltration/egresscheck")]),t._v(" "),_("td",[t._v("可用于帮助检查主机与客户端系统之间的出口，详细信息：https://github.com/stufus/egresscheck-framework")])]),t._v(" "),_("tr",[_("td",[t._v("exfiltration/exfil_dropbox")]),t._v(" "),_("td",[t._v("下载文件到dropbox")])])])]),t._v(" "),_("h3",{attrs:{id:"exploitation-漏洞利用exp"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#exploitation-漏洞利用exp"}},[t._v("#")]),t._v(" exploitation（漏洞利用EXP）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("exploitation/exploit_eternalblue")]),t._v(" "),_("td",[t._v("MS17_010永恒之蓝漏洞利用")])]),t._v(" "),_("tr",[_("td",[t._v("exploitation/exploit_jboss")]),t._v(" "),_("td",[t._v("Jboss漏洞利用")])]),t._v(" "),_("tr",[_("td",[t._v("exploitation/exploit_jenkins")]),t._v(" "),_("td",[t._v("在未授权访问的Jenkins脚本控制台上运行命令")])])])]),t._v(" "),_("h3",{attrs:{id:"lateral-movement-横向移动"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#lateral-movement-横向移动"}},[t._v("#")]),t._v(" lateral_movement（横向移动）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("lateral_movement/inveigh_relay")]),t._v(" "),_("td",[t._v("smb中继攻击")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_dcom")]),t._v(" "),_("td",[t._v("使用DCOM在远程主机上执行stager")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_executemsbuild")]),t._v(" "),_("td",[t._v("该模块利用WMI和MSBuild编译并执行一个包含Empire launcher的xml文件。")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_psexec")]),t._v(" "),_("td",[t._v("PsExec横向移动")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_psremoting")]),t._v(" "),_("td",[t._v("远程PowerShell横向移动")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_smbexec")]),t._v(" "),_("td",[t._v("SMBExec横向移动")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_sqloscmd")]),t._v(" "),_("td",[t._v("利用xp_cmdshell横向移动")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_sshcommand")]),t._v(" "),_("td",[t._v("利用SSH横向移动")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_wmi")]),t._v(" "),_("td",[t._v("利用WMI横向移动")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/invoke_wmi_debugger")]),t._v(" "),_("td",[t._v("使用WMI将远程机器上的二进制文件的调试器设置为cmd.exe或stager")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/jenkins_script_console")]),t._v(" "),_("td",[t._v("利用未授权访问的Jenkins脚本控制台横向移动")])]),t._v(" "),_("tr",[_("td",[t._v("lateral_movement/new_gpo_immediate_task")]),t._v(" "),_("td",[t._v("利用GPO中的计划任务横向移动")])])])]),t._v(" "),_("h3",{attrs:{id:"management-管理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#management-管理"}},[t._v("#")]),t._v(" management（管理）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("management/enable_rdp*")]),t._v(" "),_("td",[t._v("在远程计算机上启用RDP并添加防火墙例外。")])]),t._v(" "),_("tr",[_("td",[t._v("management/disable_rdp*")]),t._v(" "),_("td",[t._v("在远程计算机上禁用RDP")])]),t._v(" "),_("tr",[_("td",[t._v("management/downgrade_account")]),t._v(" "),_("td",[t._v("在给定的域帐户上设置可逆加密，然后强制下次用户登录时设置密码。")])]),t._v(" "),_("tr",[_("td",[t._v("management/enable_multi_rdp*")]),t._v(" "),_("td",[t._v("允许多个用户建立同时的RDP连接。")])]),t._v(" "),_("tr",[_("td",[t._v("management/get_domain_sid")]),t._v(" "),_("td",[t._v("返回当前指定域的SID")])]),t._v(" "),_("tr",[_("td",[t._v("management/honeyhash*")]),t._v(" "),_("td",[t._v("将人工凭证注入到LSASS")])]),t._v(" "),_("tr",[_("td",[t._v("management/invoke_script")]),t._v(" "),_("td",[t._v("运行自定义脚本")])]),t._v(" "),_("tr",[_("td",[t._v("management/lock")]),t._v(" "),_("td",[t._v("锁定工作站的显示")])]),t._v(" "),_("tr",[_("td",[t._v("management/logoff")]),t._v(" "),_("td",[t._v("从计算机上注销当前用户（或所有用户）")])]),t._v(" "),_("tr",[_("td",[t._v("management/psinject")]),t._v(" "),_("td",[t._v("利用Powershell注入Stephen Fewer形成的ReflectivePick，该ReflectivePick在远程过程中从内存执行PS代码")])]),t._v(" "),_("tr",[_("td",[t._v("management/reflective_inject")]),t._v(" "),_("td",[t._v("利用Powershell注入Stephen Fewer形成的ReflectivePick，该ReflectivePick在远程过程中从内存执行PS代码")])]),t._v(" "),_("tr",[_("td",[t._v("management/restart")]),t._v(" "),_("td",[t._v("重新启动指定的机器")])]),t._v(" "),_("tr",[_("td",[t._v("management/runas")]),t._v(" "),_("td",[t._v("绕过GPO路径限制")])]),t._v(" "),_("tr",[_("td",[t._v("management/shinject")]),t._v(" "),_("td",[t._v("将PIC Shellcode Payload注入目标进程")])]),t._v(" "),_("tr",[_("td",[t._v("management/sid_to_user")]),t._v(" "),_("td",[t._v("将指定的域sid转换为用户")])]),t._v(" "),_("tr",[_("td",[t._v("management/spawn")]),t._v(" "),_("td",[t._v("在新的powershell.exe进程中生成新agent")])]),t._v(" "),_("tr",[_("td",[t._v("management/spawnas")]),t._v(" "),_("td",[t._v("使用指定的登录凭据生成agent")])]),t._v(" "),_("tr",[_("td",[t._v("management/switch_listener")]),t._v(" "),_("td",[t._v("切换listener")])]),t._v(" "),_("tr",[_("td",[t._v("management/timestomp")]),t._v(" "),_("td",[t._v("通过'调用Set-MacAttribute执行类似耗时的功能")])]),t._v(" "),_("tr",[_("td",[t._v("management/user_to_sid")]),t._v(" "),_("td",[t._v("将指定的domain\\user转换为domain sid")])]),t._v(" "),_("tr",[_("td",[t._v("management/vnc")]),t._v(" "),_("td",[t._v("Invoke-Vnc在内存中执行VNC代理并启动反向连接")])]),t._v(" "),_("tr",[_("td",[t._v("management/wdigest_downgrade*")]),t._v(" "),_("td",[t._v("将计算机上的wdigest设置为使用显式凭据")])]),t._v(" "),_("tr",[_("td",[t._v("management/zipfolder")]),t._v(" "),_("td",[t._v("压缩目标文件夹以供以后渗透")])]),t._v(" "),_("tr",[_("td",[t._v("management/mailraider/disable_security")]),t._v(" "),_("td",[t._v("此函数检查ObjectModelGuard")])]),t._v(" "),_("tr",[_("td",[t._v("management/mailraider/get_emailitems")]),t._v(" "),_("td",[t._v("返回指定文件夹的所有项目")])]),t._v(" "),_("tr",[_("td",[t._v("management/mailraider/get_subfolders")]),t._v(" "),_("td",[t._v("返回指定顶级文件夹中所有文件夹的列表")])]),t._v(" "),_("tr",[_("td",[t._v("management/mailraider/mail_search")]),t._v(" "),_("td",[t._v("在给定的Outlook文件夹中搜索项目")])]),t._v(" "),_("tr",[_("td",[t._v("management/mailraider/search_gal")]),t._v(" "),_("td",[t._v("返回与指定搜索条件匹配的所有exchange users")])]),t._v(" "),_("tr",[_("td",[t._v("management/mailraider/send_mail")]),t._v(" "),_("td",[t._v("使用自定义或默认模板将电子邮件发送到指定地址。")])]),t._v(" "),_("tr",[_("td",[t._v("management/mailraider/view_email")]),t._v(" "),_("td",[t._v("选择指定的文件夹，然后在指定的索引处输出电子邮件项目")])])])]),t._v(" "),_("h3",{attrs:{id:"persistence-持久化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#persistence-持久化"}},[t._v("#")]),t._v(" persistence（持久化）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("persistence/elevated/registry*")]),t._v(" "),_("td",[t._v("计算机启动项持久化，通过HKLM:SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run进行持久化，运行一个stager或者脚本")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/elevated/schtasks*")]),t._v(" "),_("td",[t._v("计划任务持久化")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/elevated/wmi*")]),t._v(" "),_("td",[t._v("WMI事件订阅持久化")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/elevated/wmi_updater*")]),t._v(" "),_("td",[t._v("WMI订阅持久化")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/add_netuser")]),t._v(" "),_("td",[t._v("将域用户或本地用户添加到当前（或远程）计算机")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/add_sid_history*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以执行misc::addsid以添加用户的sid历史记录。 仅适用于域控制器")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/debugger*")]),t._v(" "),_("td",[t._v("将指定目标二进制文件的调试器设置为cmd.exe")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/disable_machine_acct_change*")]),t._v(" "),_("td",[t._v("禁止目标系统的机器帐户自动更改其密码")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/get_ssps")]),t._v(" "),_("td",[t._v("枚举所有已加载的安全软件包")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/install_ssp*")]),t._v(" "),_("td",[t._v("安装安全支持提供程序dll")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/memssp*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数以执行misc::memssp，将所有身份验证事件记录到C:\\Windows\\System32\\mimisla.log")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/misc/skeleton_key*")]),t._v(" "),_("td",[t._v("运行PowerSploit的Invoke-Mimikatz函数来执行misc::skeleton，植入密码mimikatz的万能钥匙。 仅适用于域控制器")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/powerbreach/deaduser")]),t._v(" "),_("td",[t._v("DeadUserBackdoor后门，详细信息：http://www.sixdub.net/?p=535")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/powerbreach/eventlog*")]),t._v(" "),_("td",[t._v("启动事件循环后门")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/powerbreach/resolver")]),t._v(" "),_("td",[t._v("启动解析器后门")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/userland/backdoor_lnk")]),t._v(" "),_("td",[t._v("LNK文件后门")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/userland/registry")]),t._v(" "),_("td",[t._v("计算机启动项持久化，通过HKLM:SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run进行持久化，运行一个stager或者脚本")])]),t._v(" "),_("tr",[_("td",[t._v("persistence/userland/schtasks")]),t._v(" "),_("td",[t._v("计划任务持久化")])])])]),t._v(" "),_("h3",{attrs:{id:"privesc-权限提升"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#privesc-权限提升"}},[t._v("#")]),t._v(" privesc（权限提升）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("privesc/ask")]),t._v(" "),_("td",[t._v("弹出一个对话框，询问用户是否要以管理员身份运行powershell")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/bypassuac")]),t._v(" "),_("td",[t._v("UAC旁路")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/bypassuac_env")]),t._v(" "),_("td",[t._v("UAC旁路，通过SilentCleanup")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/bypassuac_eventvwr")]),t._v(" "),_("td",[t._v("UAC旁路，通过在.msc文件扩展名上执行映像劫持并启动eventvwr.exe来绕过UAC")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/bypassuac_fodhelper")]),t._v(" "),_("td",[t._v("UAC旁路，利用fodhelper.exe")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/bypassuac_sdctlbypass")]),t._v(" "),_("td",[t._v("UAC旁路，通过对sdclt执行注册表修改来绕过UAC")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/bypassuac_tokenmanipulation")]),t._v(" "),_("td",[t._v("UAC旁路，基于Matt Nelson @enigma0x3在Derbycon 2017上发布的脚本的绕过UAC模块")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/bypassuac_wscript")]),t._v(" "),_("td",[t._v("UAC旁路，利用Windows Script Host")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/getsystem*")]),t._v(" "),_("td",[t._v("获取system特权")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/gpp")]),t._v(" "),_("td",[t._v("利用windows组策略首选项缺陷获取系统帐号")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/mcafee_sitelist")]),t._v(" "),_("td",[t._v("寻找McAfee SiteList.xml文件的纯文本密码")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/ms16-032")]),t._v(" "),_("td",[t._v("MS16-032本地提权")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/ms16-135")]),t._v(" "),_("td",[t._v("MS16-135本地提权")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/tater")]),t._v(" "),_("td",[t._v("利用PowerShell实现的Hot Potato提权")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/allchecks")]),t._v(" "),_("td",[t._v("检查目标主机的攻击向量以进行权限提升")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/find_dllhijack")]),t._v(" "),_("td",[t._v("查找通用的.DLL劫持")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/service_exe_restore")]),t._v(" "),_("td",[t._v("还原备份的服务二进制文件")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/service_exe_stager")]),t._v(" "),_("td",[t._v("备份服务的二进制文件，并用启动stager.bat的二进制文件替换原始文件")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/service_exe_useradd")]),t._v(" "),_("td",[t._v("修改目标服务以创建本地用户并将其添加到本地管理员")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/service_stager")]),t._v(" "),_("td",[t._v("修改目标服务以执行Empire stager")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/service_useradd")]),t._v(" "),_("td",[t._v("修改目标服务以创建本地用户并将其添加到本地管理员")])]),t._v(" "),_("tr",[_("td",[t._v("privesc/powerup/write_dllhijacker")]),t._v(" "),_("td",[t._v("将可劫持的.dll以及.dll调用的stager.bat一起写到指定路径。 wlbsctrl.dll在Windows 7上运行良好。需要重新启动计算机")])])])]),t._v(" "),_("h3",{attrs:{id:"recon-侦察"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#recon-侦察"}},[t._v("#")]),t._v(" recon（侦察）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("recon/find_fruit")]),t._v(" "),_("td",[t._v("在网络范围内搜索潜在的易受攻击的Web服务")])]),t._v(" "),_("tr",[_("td",[t._v("recon/get_sql_server_login_default_pw")]),t._v(" "),_("td",[t._v("发现在当前广播域之内的SQL Server实例")])]),t._v(" "),_("tr",[_("td",[t._v("recon/http_login")]),t._v(" "),_("td",[t._v("针对基本身份验证测试凭据")])])])]),t._v(" "),_("h3",{attrs:{id:"situational-awareness-态势感知"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#situational-awareness-态势感知"}},[t._v("#")]),t._v(" situational_awareness（态势感知）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("situational_awareness/host/antivirusproduct")]),t._v(" "),_("td",[t._v("获取防病毒产品信息")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/computerdetails*")]),t._v(" "),_("td",[t._v("枚举有关系统的有用信息")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/dnsserver")]),t._v(" "),_("td",[t._v("枚举系统使用的DNS服务器")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/findtrusteddocuments")]),t._v(" "),_("td",[t._v("该模块将枚举适当的注册表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/get_pathacl")]),t._v(" "),_("td",[t._v("枚举给定文件路径的ACL")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/get_proxy")]),t._v(" "),_("td",[t._v("枚举当前用户的代理服务器和WPAD内容")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/get_uaclevel")]),t._v(" "),_("td",[t._v("枚举UAC级别")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/monitortcpconnections")]),t._v(" "),_("td",[t._v("监视主机与指定域名或IPv4地址的TCP连接，对于会话劫持和查找与敏感服务进行交互的用户很有用")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/paranoia*")]),t._v(" "),_("td",[t._v("持续检查运行过程中是否存在可疑用户")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/host/winenum")]),t._v(" "),_("td",[t._v("收集有关主机和当前用户上下文的相关信息")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/arpscan")]),t._v(" "),_("td",[t._v("针对给定范围的IPv4 IP地址执行ARP扫描")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/bloodhound")]),t._v(" "),_("td",[t._v("执行BloodHound数据收集")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/get_exploitable_system")]),t._v(" "),_("td",[t._v("查询Active Directory以查找可能容易受到Metasploit Exploit的系统")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/get_spn")]),t._v(" "),_("td",[t._v("获取服务主体名称（SPN）")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/get_sql_instance_domain")]),t._v(" "),_("td",[t._v("返回SQL Server实例列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/get_sql_server_info")]),t._v(" "),_("td",[t._v("从目标SQL Server返回基本服务器和用户信息")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/portscan")]),t._v(" "),_("td",[t._v("使用常规套接字进行简单的端口扫描")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/reverse_dns")]),t._v(" "),_("td",[t._v("执行给定IPv4 IP范围的DNS反向查找")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/smbautobrute")]),t._v(" "),_("td",[t._v("针对用户名/密码列表运行SMB暴力破解")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/smbscanner")]),t._v(" "),_("td",[t._v("在多台机器上测试用户名/密码组合")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/find_foreign_group")]),t._v(" "),_("td",[t._v("枚举给定域的组的所有成员，并查找不在查询域中的用户")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/find_foreign_user")]),t._v(" "),_("td",[t._v("枚举在其主域之外的组中的用户")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/find_gpo_computer_admin")]),t._v(" "),_("td",[t._v("获取计算机（或GPO）对象，并确定哪些用户/组对该对象具有管理访问权限")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/find_gpo_location")]),t._v(" "),_("td",[t._v("获取用户名或组名，并确定其具有通过GPO进行管理访问的计算机")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/find_localadmin_access")]),t._v(" "),_("td",[t._v("在当前用户具有“本地管理员”访问权限的本地域上查找计算机")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/find_managed_security_group")]),t._v(" "),_("td",[t._v("此功能检索域中的所有安全组")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_cached_rdpconnection")]),t._v(" "),_("td",[t._v("使用远程注册表功能来查询计算机上“ Windows远程桌面连接客户端”的所有信息")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_computer")]),t._v(" "),_("td",[t._v("查询当前计算机对象的域")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_dfs_share")]),t._v(" "),_("td",[t._v("返回给定域的所有容错分布式文件系统的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_domain_controller")]),t._v(" "),_("td",[t._v("返回当前域或指定域的域控制器")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_domain_policy")]),t._v(" "),_("td",[t._v("返回给定域或域控制器的默认域或DC策略")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_domain_trust")]),t._v(" "),_("td",[t._v("返回当前域或指定域的所有域信任")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_fileserver")]),t._v(" "),_("td",[t._v("返回从用户主目录提取的所有文件服务器的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_forest")]),t._v(" "),_("td",[t._v("返回有关给定域森林的信息")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_forest_domain")]),t._v(" "),_("td",[t._v("返回给定林的所有域")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_gpo")]),t._v(" "),_("td",[t._v("获取域中所有当前GPO的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_group")]),t._v(" "),_("td",[t._v("获取域中所有当前组的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_group_member")]),t._v(" "),_("td",[t._v("返回给定组的成员")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_localgroup")]),t._v(" "),_("td",[t._v("返回本地或远程计算机上指定本地组中所有当前用户的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_loggedon")]),t._v(" "),_("td",[t._v("执行NetWkstaUserEnum Win32API调用以查询主动登录主机的用户")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_object_acl")]),t._v(" "),_("td",[t._v("返回与特定活动目录对象关联的ACL")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_ou")]),t._v(" "),_("td",[t._v("获取域中所有当前OU的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_rdp_session")]),t._v(" "),_("td",[t._v("在给定的RDP远程服务中查询活动会话和原始IP")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_session")]),t._v(" "),_("td",[t._v("执行NetSessionEnum Win32API调用以查询主机上的活动会话")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_site")]),t._v(" "),_("td",[t._v("获取域中所有当前站点的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_subnet")]),t._v(" "),_("td",[t._v("获取域中所有当前子网的列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/get_user")]),t._v(" "),_("td",[t._v("查询给定用户或指定域中用户的信息")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/map_domain_trust")]),t._v(" "),_("td",[t._v("使用.CSV输出映射所有可访问的域信任")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/process_hunter")]),t._v(" "),_("td",[t._v("查询远程机器的进程列表")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/set_ad_object")]),t._v(" "),_("td",[t._v("使用SID，名称或SamAccountName来查询指定的域对象")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/share_finder")]),t._v(" "),_("td",[t._v("在域中的计算机上查找共享")])]),t._v(" "),_("tr",[_("td",[t._v("situational_awareness/network/powerview/user_hunter")]),t._v(" "),_("td",[t._v("查找指定组的用户登录的机器")])])])]),t._v(" "),_("h3",{attrs:{id:"trollsploit-嬉戏"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#trollsploit-嬉戏"}},[t._v("#")]),t._v(" trollsploit（嬉戏）")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("模块名")]),t._v(" "),_("th",[t._v("功能")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("trollsploit/get_schwifty")]),t._v(" "),_("td",[t._v("播放Schwifty视频，同时把计算机音量设置最大")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/message")]),t._v(" "),_("td",[t._v("发送一个消息框")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/process_killer")]),t._v(" "),_("td",[t._v("终止以特定名称开头的任何进程")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/rick_ascii")]),t._v(" "),_("td",[t._v("生成一个新的powershell.exe进程运行Lee Holmes' ASCII Rick Roll")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/rick_astley")]),t._v(" "),_("td",[t._v("运行SadProcessor's beeping rickroll")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/thunderstruck")]),t._v(" "),_("td",[t._v("播放Thunderstruck视频，同时把计算机音量设置最大")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/voicetroll")]),t._v(" "),_("td",[t._v("通过目标上的合成语音朗读文本")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/wallpaper")]),t._v(" "),_("td",[t._v("将.jpg图片上传到目标机器并将其设置为桌面壁纸")])]),t._v(" "),_("tr",[_("td",[t._v("trollsploit/wlmdr")]),t._v(" "),_("td",[t._v("在任务栏中显示气球提示")])])])]),t._v(" "),_("p",[t._v("点击收藏 | 5关注 | 3")])])}),[],!1,null,null,null);e.default=v.exports}}]);